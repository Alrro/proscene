#summary Deploying an DOF6Agent
#sidebar TerseHandlingSideBar

Being this one the last TerseHandling introductory tutorial, 

We want to close this `TerseHandling` introductory tutorial series by showing how simple is to implement an Agent feed from the output generated by a physical device, reported by a third party hardware controller.

Our goal is to implement an `HIDAgent` to control our [GlobalActions handling global actions previous tutorial] scene using a [http://en.wikipedia.org/wiki/3Dconnexion 6DOF space navigator], keeping `MouseAgent` as an object selector.

Here we will show how little extra-effort is needed to implement this much more involved setup.

= Adding a new action=

{{{
public enum GlobalAction {
  CHANGE_COLOR, 
  CHANGE_STROKE_WEIGHT, 
  CHANGE_POSITION, 
  CHANGE_SHAPE,
  CHANGE_POS_SHAPE
}

}}}

{{{
public enum SpaceAction implements Actionable<GlobalAction> {
  CHANGE_POS_SHAPE(GlobalAction.CHANGE_POS_SHAPE);

  @Override
  public GlobalAction referenceAction() {
    return act;
  }

  @Override
  public String description() {
    return "A simple motion action";
  }

  @Override
  public boolean is2D() {
    return true;
  }

  @Override
  public int dofs() {
    return 6;
  }

  GlobalAction act;

  SpaceAction(GlobalAction a) {
    act = a;
  }
}
}}}

= Overriding an event feed =

{{{
public class HIDAgent extends GenericMotionAgent<GenericMotionProfile<SpaceAction>, GenericClickProfile<ClickAction>> implements EventConstants {
  public HIDAgent(TerseHandler h, String n) {
    super(new GenericMotionProfile<SpaceAction>(), new GenericClickProfile<ClickAction>(), h, n);
    //default bindings
    profile().setBinding(SpaceAction.CHANGE_POS_SHAPE);
    disableTracking();
    setSensitivities(0.01, 0.01, 0.01, 0.0001, 0.0001, 0.0001);
  }

  @Override
  public GenericDOF6Event<SpaceAction> feed() {
    return new GenericDOF6Event<SpaceAction>(sliderXpos.getValue(), sliderYpos.getValue(), sliderZpos.getValue(),
                                             sliderXrot.getValue(), sliderYrot.getValue(), sliderZrot.getValue(), 0, 0);
  }
}
}}}

= `Updating our MouseAgent` =



{{{
  public void mouseEvent(processing.event.MouseEvent e) {      
    if ( e.getAction() == processing.event.MouseEvent.MOVE ) {
      event = new GenericDOF2Event<MotionAction>(prevEvent, e.getX(), e.getY(), e.getModifiers(), e.getButton());
      updateGrabber(event);
      hidAgent.setDefaultGrabber(trackedGrabber());
      prevEvent = event.get();
    }
    if ( e.getAction() == processing.event.MouseEvent.DRAG ) {
      event = new GenericDOF2Event<MotionAction>(prevEvent, e.getX(), e.getY(), e.getModifiers(), e.getButton());
      handle(event);
      prevEvent = event.get();
    }
    if ( e.getAction() == processing.event.MouseEvent.CLICK ) {
      handle(new GenericClickEvent<ClickAction>(e.getModifiers(), e.getButton(), e.getCount()));
    }
  }
}}}

{{{
hidAgent.setDefaultGrabber(trackedGrabber());
}}}